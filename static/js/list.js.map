{"version":3,"sources":["list.js"],"names":["filterMembers","vnode","input","options","fuse","Fuse","state","members","keys","threshold","tokenize","filteredMembers","search","MembersList","oninit","q","m","request","method","url","then","result","view","onclick","e","preventDefault","window","location","value","oninput","target","map","entry","member","id","first_name","last_name","email","birthday","onload","mount","document","getElementById"],"mappings":";AAAA,IAAIA,EAAgB,SAASC,EAAOC,GAC7BA,GAAAA,GAAkB,IAATA,EAAa,CACjBC,IAKAC,EAAO,IAAIC,KAAKJ,EAAMK,MAAMC,QALlB,CACVC,KAAM,CAAC,eAAgB,cAAe,aACtCC,UAAW,EACXC,UAAU,IAGdT,EAAMK,MAAMK,gBAAkBP,EAAKQ,OAAOV,QAE1CD,EAAMK,MAAMK,gBAAkBV,EAAMK,MAAMC,SAI9CM,EAAc,CACdC,OAAQ,SAASb,GACbA,EAAMK,MAAMS,EAAI,GAEhBC,EAAEC,QAAQ,CACNC,OAAQ,MACRC,IAAK,uBAERC,KAAK,SAASC,GACXpB,EAAMK,MAAMC,QAAUc,EACtBrB,EAAcC,EAAOA,EAAMK,MAAMS,MAGzCO,KAAM,SAASrB,GACJ,MAAA,CACHe,EAAE,aAAcA,EAAE,OACdA,EAAE,cAAe,CACbA,EAAE,oCAAqC,CACnCO,QAAS,SAACC,GACNA,EAAEC,iBACFC,OAAOC,SAAW,oBAEvB,CAACX,EAAE,iBAAkB,oCAGhCA,EAAE,aAAcA,EAAE,OACdA,EAAE,cAAe,CACbA,EAAE,6EAA8E,CAC5EY,MAAO3B,EAAMK,MAAMS,EACnBc,QAAS,SAASL,GACdvB,EAAMK,MAAMS,EAAIS,EAAEM,OAAOF,MACzB5B,EAAcC,EAAOA,EAAMK,MAAMS,UAKjDC,EAAE,aAAc,CACZA,EAAE,iCAAkC,CAChCA,EAAE,QAASA,EAAE,KAAM,CACXA,EAAE,KAAM,MACRA,EAAE,KAAM,WACRA,EAAE,KAAM,eACRA,EAAE,KAAM,UACRA,EAAE,KAAM,iBAEhBA,EAAE,QAAS,CACPf,EAAMK,MAAMK,gBAAkBV,EAAMK,MAAMK,gBAAgBoB,IAAI,SAASC,GAC/DC,IAAAA,EAASD,EAAM,GACNA,EAAM,GAEZ,MAAA,CACHhB,EAAE,KAAM,CACJO,QAAS,SAASC,GACdA,EAAEC,iBACFC,OAAOC,SAAW,iBAAmBM,EAAOC,KAEjD,CACClB,EAAE,KAAMiB,EAAOC,IACflB,EAAE,KAAMiB,EAAOE,YACfnB,EAAE,KAAMiB,EAAOG,WACfpB,EAAE,KAAMiB,EAAOI,OACfrB,EAAE,KAAMiB,EAAOK,eAGtB,YAQ7BZ,OAAOa,OAAS,WACZvB,EAAEwB,MAAMC,SAASC,eAAe,SAAU7B","file":"list.js","sourceRoot":"../../frontend/src/members","sourcesContent":["var filterMembers = function(vnode, input) {\n    if(input && input != '') {\n        var options = {\n            keys: ['0.first_name', '0.last_name', '0.email_1'],\n            threshold: 0.00,\n            tokenize: true,\n        };\n        var fuse = new Fuse(vnode.state.members, options);\n        vnode.state.filteredMembers = fuse.search(input);\n    } else {\n        vnode.state.filteredMembers = vnode.state.members;\n    }\n}\n\nvar MembersList = {\n    oninit: function(vnode) {\n        vnode.state.q = '';\n\n        m.request({\n            method: 'GET',\n            url: \"/members/list_json\",\n        })\n        .then(function(result) {\n            vnode.state.members = result;\n            filterMembers(vnode, vnode.state.q);\n        })\n    },\n    view: function(vnode) {\n        return [\n            m('div.col-12', m('form',\n                m('.form-group', [\n                    m('button.btn.btn-success[type=text]', {\n                        onclick: (e) => {\n                            e.preventDefault();\n                            window.location = '/members/view/0'\n                        }\n                    }, [m('i.fas.fa-plus'), ' Neues Mitglied hinzuf√ºgen.'])\n                ])\n            )),\n            m('div.col-12', m('form',\n                m('.form-group', [\n                    m('input[type=text].form-control[placeholder=\"Suche nach Vor- oder Nachname\"]', {\n                        value: vnode.state.q,\n                        oninput: function(e) {\n                            vnode.state.q = e.target.value;\n                            filterMembers(vnode, vnode.state.q);\n                        }\n                    })\n                ])\n            )),\n            m('div.col-12', [\n                m('table.table.table-hover.col-12', [\n                    m('thead', m('tr', [\n                            m('th', 'ID'),\n                            m('th', 'Vorname'),\n                            m('th', 'Nachname(n)'),\n                            m('th', 'E-Mail'),\n                            m('th', 'Geburtstag'),\n                    ])),\n                    m('tbody', [\n                        vnode.state.filteredMembers ? vnode.state.filteredMembers.map(function(entry) {\n                            let member = entry[0];\n                            let events = entry[1];\n                            \n                            return [\n                                m('tr', {\n                                    onclick: function(e) {\n                                        e.preventDefault();\n                                        window.location = '/members/view/' + member.id;\n                                    },\n                                }, [\n                                    m('td', member.id),\n                                    m('td', member.first_name),\n                                    m('td', member.last_name),\n                                    m('td', member.email),\n                                    m('td', member.birthday),\n                                ]),\n                            ]\n                        }) : ''\n                    ])\n                ])\n            ])\n        ]\n    }\n}\n\nwindow.onload = function() {\n    m.mount(document.getElementById('mount'), MembersList)\n};"]}