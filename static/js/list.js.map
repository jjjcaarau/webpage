{"version":3,"sources":["list.js"],"names":["filterMembers","vnode","input","options","keys","threshold","tokenize","fuse","Fuse","state","members","filteredMembers","search","MembersList","oninit","q","m","request","method","url","then","result","view","onclick","e","preventDefault","window","location","value","oninput","target","map","entry","member","events","id","first_name","last_name","email","birthday","onload","mount","document","getElementById"],"mappings":"AAAA,IAAIA,aAAa,GAAG,SAAhBA,aAAgB,CAASC,KAAT,EAAgBC,KAAhB,EAAuB;AACvC,MAAGA,KAAK,IAAIA,KAAK,IAAI,EAArB,EAAyB;AACrB,QAAIC,OAAO,GAAG;AACVC,MAAAA,IAAI,EAAE,CAAC,cAAD,EAAiB,aAAjB,EAAgC,WAAhC,CADI;AAEVC,MAAAA,SAAS,EAAE,IAFD;AAGVC,MAAAA,QAAQ,EAAE;AAHA,KAAd;AAKA,QAAIC,IAAI,GAAG,IAAIC,IAAJ,CAASP,KAAK,CAACQ,KAAN,CAAYC,OAArB,EAA8BP,OAA9B,CAAX;AACAF,IAAAA,KAAK,CAACQ,KAAN,CAAYE,eAAZ,GAA8BJ,IAAI,CAACK,MAAL,CAAYV,KAAZ,CAA9B;AACH,GARD,MAQO;AACHD,IAAAA,KAAK,CAACQ,KAAN,CAAYE,eAAZ,GAA8BV,KAAK,CAACQ,KAAN,CAAYC,OAA1C;AACH;AACJ,CAZD;;AAcA,IAAIG,WAAW,GAAG;AACdC,EAAAA,MAAM,EAAE,gBAASb,KAAT,EAAgB;AACpBA,IAAAA,KAAK,CAACQ,KAAN,CAAYM,CAAZ,GAAgB,EAAhB;AAEAC,IAAAA,CAAC,CAACC,OAAF,CAAU;AACNC,MAAAA,MAAM,EAAE,KADF;AAENC,MAAAA,GAAG,EAAE;AAFC,KAAV,EAICC,IAJD,CAIM,UAASC,MAAT,EAAiB;AACnBpB,MAAAA,KAAK,CAACQ,KAAN,CAAYC,OAAZ,GAAsBW,MAAtB;AACArB,MAAAA,aAAa,CAACC,KAAD,EAAQA,KAAK,CAACQ,KAAN,CAAYM,CAApB,CAAb;AACH,KAPD;AAQH,GAZa;AAadO,EAAAA,IAAI,EAAE,cAASrB,KAAT,EAAgB;AAClB,WAAO,CACHe,CAAC,CAAC,YAAD,EAAeA,CAAC,CAAC,MAAD,EACbA,CAAC,CAAC,aAAD,EAAgB,CACbA,CAAC,CAAC,mCAAD,EAAsC;AACnCO,MAAAA,OAAO,EAAE,iBAACC,CAAD,EAAO;AACZA,QAAAA,CAAC,CAACC,cAAF;AACAC,QAAAA,MAAM,CAACC,QAAP,GAAkB,iBAAlB;AACH;AAJkC,KAAtC,EAKE,CAACX,CAAC,CAAC,eAAD,CAAF,EAAqB,6BAArB,CALF,CADY,CAAhB,CADY,CAAhB,CADE,EAWHA,CAAC,CAAC,YAAD,EAAeA,CAAC,CAAC,MAAD,EACbA,CAAC,CAAC,aAAD,EAAgB,CACbA,CAAC,CAAC,4EAAD,EAA+E;AAC5EY,MAAAA,KAAK,EAAE3B,KAAK,CAACQ,KAAN,CAAYM,CADyD;AAE5Ec,MAAAA,OAAO,EAAE,iBAASL,CAAT,EAAY;AACjBvB,QAAAA,KAAK,CAACQ,KAAN,CAAYM,CAAZ,GAAgBS,CAAC,CAACM,MAAF,CAASF,KAAzB;AACA5B,QAAAA,aAAa,CAACC,KAAD,EAAQA,KAAK,CAACQ,KAAN,CAAYM,CAApB,CAAb;AACH;AAL2E,KAA/E,CADY,CAAhB,CADY,CAAhB,CAXE,EAsBHC,CAAC,CAAC,YAAD,EAAe,CACZA,CAAC,CAAC,gCAAD,EAAmC,CAChCA,CAAC,CAAC,OAAD,EAAUA,CAAC,CAAC,IAAD,EAAO,CACXA,CAAC,CAAC,IAAD,EAAO,IAAP,CADU,EAEXA,CAAC,CAAC,IAAD,EAAO,SAAP,CAFU,EAGXA,CAAC,CAAC,IAAD,EAAO,aAAP,CAHU,EAIXA,CAAC,CAAC,IAAD,EAAO,QAAP,CAJU,EAKXA,CAAC,CAAC,IAAD,EAAO,YAAP,CALU,CAAP,CAAX,CAD+B,EAQhCA,CAAC,CAAC,OAAD,EAAU,CACPf,KAAK,CAACQ,KAAN,CAAYE,eAAZ,GAA8BV,KAAK,CAACQ,KAAN,CAAYE,eAAZ,CAA4BoB,GAA5B,CAAgC,UAASC,KAAT,EAAgB;AAC1E,UAAIC,MAAM,GAAGD,KAAK,CAAC,CAAD,CAAlB;AACA,UAAIE,MAAM,GAAGF,KAAK,CAAC,CAAD,CAAlB;AAEA,aAAO,CACHhB,CAAC,CAAC,IAAD,EAAO;AACJO,QAAAA,OAAO,EAAE,iBAASC,CAAT,EAAY;AACjBA,UAAAA,CAAC,CAACC,cAAF;AACAC,UAAAA,MAAM,CAACC,QAAP,GAAkB,mBAAmBM,MAAM,CAACE,EAA5C;AACH;AAJG,OAAP,EAKE,CACCnB,CAAC,CAAC,IAAD,EAAOiB,MAAM,CAACE,EAAd,CADF,EAECnB,CAAC,CAAC,IAAD,EAAOiB,MAAM,CAACG,UAAd,CAFF,EAGCpB,CAAC,CAAC,IAAD,EAAOiB,MAAM,CAACI,SAAd,CAHF,EAICrB,CAAC,CAAC,IAAD,EAAOiB,MAAM,CAACK,KAAd,CAJF,EAKCtB,CAAC,CAAC,IAAD,EAAOiB,MAAM,CAACM,QAAd,CALF,CALF,CADE,CAAP;AAcH,KAlB6B,CAA9B,GAkBK,EAnBE,CAAV,CAR+B,CAAnC,CADW,CAAf,CAtBE,CAAP;AAuDH;AArEa,CAAlB;;AAwEAb,MAAM,CAACc,MAAP,GAAgB,YAAW;AACvBxB,EAAAA,CAAC,CAACyB,KAAF,CAAQC,QAAQ,CAACC,cAAT,CAAwB,OAAxB,CAAR,EAA0C9B,WAA1C;AACH,CAFD","file":"list.js","sourceRoot":"../../frontend/src/members","sourcesContent":["var filterMembers = function(vnode, input) {\n    if(input && input != '') {\n        var options = {\n            keys: ['0.first_name', '0.last_name', '0.email_1'],\n            threshold: 0.00,\n            tokenize: true,\n        };\n        var fuse = new Fuse(vnode.state.members, options);\n        vnode.state.filteredMembers = fuse.search(input);\n    } else {\n        vnode.state.filteredMembers = vnode.state.members;\n    }\n}\n\nvar MembersList = {\n    oninit: function(vnode) {\n        vnode.state.q = '';\n\n        m.request({\n            method: 'GET',\n            url: \"/members/list_json\",\n        })\n        .then(function(result) {\n            vnode.state.members = result;\n            filterMembers(vnode, vnode.state.q);\n        })\n    },\n    view: function(vnode) {\n        return [\n            m('div.col-12', m('form',\n                m('.form-group', [\n                    m('button.btn.btn-success[type=text]', {\n                        onclick: (e) => {\n                            e.preventDefault();\n                            window.location = '/members/view/0'\n                        }\n                    }, [m('i.fas.fa-plus'), ' Neues Mitglied hinzuf√ºgen.'])\n                ])\n            )),\n            m('div.col-12', m('form',\n                m('.form-group', [\n                    m('input[type=text].form-control[placeholder=\"Suche nach Vor- oder Nachname\"]', {\n                        value: vnode.state.q,\n                        oninput: function(e) {\n                            vnode.state.q = e.target.value;\n                            filterMembers(vnode, vnode.state.q);\n                        }\n                    })\n                ])\n            )),\n            m('div.col-12', [\n                m('table.table.table-hover.col-12', [\n                    m('thead', m('tr', [\n                            m('th', 'ID'),\n                            m('th', 'Vorname'),\n                            m('th', 'Nachname(n)'),\n                            m('th', 'E-Mail'),\n                            m('th', 'Geburtstag'),\n                    ])),\n                    m('tbody', [\n                        vnode.state.filteredMembers ? vnode.state.filteredMembers.map(function(entry) {\n                            let member = entry[0];\n                            let events = entry[1];\n                            \n                            return [\n                                m('tr', {\n                                    onclick: function(e) {\n                                        e.preventDefault();\n                                        window.location = '/members/view/' + member.id;\n                                    },\n                                }, [\n                                    m('td', member.id),\n                                    m('td', member.first_name),\n                                    m('td', member.last_name),\n                                    m('td', member.email),\n                                    m('td', member.birthday),\n                                ]),\n                            ]\n                        }) : ''\n                    ])\n                ])\n            ])\n        ]\n    }\n}\n\nwindow.onload = function() {\n    m.mount(document.getElementById('mount'), MembersList)\n};"]}